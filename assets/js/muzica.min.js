"use strict";class Muzica{constructor(muzica){this.Version=10,this.debug=!1,this.debug&&console.groupCollapsed("api version "+this.Version+" vanilla js"),this.debug&&console.log("source: https://github.com/patobeur/Muzica"),this.showOldSearch=!0,this.oldSearch=[],this.modalFooter=!1,this.nbSubmitDie=5,this.vinylButon=!0,this.vinyl_enabled=!0,this.vinyl_searching=!1,this.nbSubmit=0,this.limitPerPage=25,this.actualOffset=0,this.nbReponses=0,this.nbPages=0,this.inputSearch="marecherche",this.formName="rechercher",this.inputSelect="maselection",this.modalName="rel_modal",this.iconeVoirAlbum="fas fa-plus-circle",this.reponseReq="",this.maSelection="default",this.maRecherche="",this.typeActuel="",this.reqActuel="",this.fullColonnes=[],this.reponseHtml="",this.urlDemandee="",this.nbReponses=0,this.nodata="no data",this.urlmbid="",this.mbid="",this.urlDatas={methode:"GET",url:"https://musicbrainz.org/ws/2/",inc:"/?fmt=json&query=",rel:"&inc=genres+ratings+artists+releases+annotation",arts:"https://coverartarchive.org/release/",fmt:"?fmt=json"},this.myCats={default:{name:"default",texteselect:"EveryThing",type:"recording",SearchCategorie:"recordings",intitules:["#","artist","title","album","actions"],SearchTag:["artist","release","recording"],iconeclass:"fas fa-globe-europe"},artist:{name:"artist",texteselect:"Artiste",type:"recording",SearchCategorie:"recordings",intitules:["#","artist","title","album","actions"],SearchTag:["artist","release","recording"],iconeclass:"fas fa-user-music"},recording:{name:"recording",texteselect:"Title",type:"recording",SearchCategorie:"recordings",intitules:["#","artist","title","album","actions"],SearchTag:["artist","release","recording"],iconeclass:"fas fa-record-vinyl"},release:{name:"release",texteselect:"Album",type:"recording",SearchCategorie:"recordings",intitules:["#","artist","title","album","actions"],SearchTag:["artist","release","recording"],iconeclass:"fas fa-album-collection"}},this.debug&&console.groupEnd()}listener(){document.querySelector("#rechercher").addEventListener("mouseover",event=>{let notempty=""!=document.querySelector("#"+this.inputSearch).value;this.set_submit_onoff(notempty)}),document.addEventListener("keydown",e=>{let modal=document.querySelector("#"+this.modalName);27===e.keyCode&&modal&&modal.parentNode.removeChild(modal)}),document.querySelector("#"+this.formName).addEventListener("submit",event=>{event.preventDefault(),this.set_InitialSearch();let marecherche=document.querySelector("#"+this.inputSearch).value;marecherche&&""!=marecherche&&(this.set_This("Listener","actualOffset",0),this.set_This("Listener:","maRecherche",this.set_CleanString(marecherche)),this.get_Recordings())}),document.querySelector("#"+this.inputSelect).addEventListener("change",event=>{let changed=event.target.options[event.target.selectedIndex].value,changed2=event.target.options[event.target.selectedIndex].index;event.target.options[changed2].selected="selected",console.log(changed),console.log(changed2),document.querySelector("#"+this.inputSelect).blur()}),document.querySelector("#vinyl-bouton").addEventListener("click",e=>{this.myOldVinylButon()})}set_This(Func,Nom,Value){this[Nom]=Value}set_submit_onoff(notempty){if(notempty){document.querySelector("#"+this.inputSearch).classList.remove("empty");let submitbuts=document.querySelector(".clonA");submitbuts.classList.remove("no"),submitbuts=document.querySelector(".clonB"),submitbuts.classList.remove("no")}else{document.querySelector("#"+this.inputSearch).classList.add("empty");let submitbuts=document.querySelector(".clonA");submitbuts.classList.add("no"),submitbuts=document.querySelector(".clonB"),submitbuts.classList.add("no"),document.querySelector("#"+this.inputSearch).focus()}}del_TagById(tagId){let aEffacer=document.querySelector("#"+tagId);aEffacer&&aEffacer.parentNode.removeChild(aEffacer)}set_Pagination(){if(this.nbReponses<1)this.del_TagById("pagination");else if(this.nbReponses>this.limitPerPage){let pagination=document.createElement("nav");pagination.id="pagination",pagination.className="pagination-groupe",pagination.setAttribute("aria-label","Page navigation example");let pag_buttons=document.createElement("ul");pag_buttons.className="pagination justify-content-end pagination-sm";let pag_previous=document.createElement("li");pag_previous.className="page-item"+(this.actualOffset<this.limitPerPage?" disabled":"");let pag_previous_link=document.createElement("a");pag_previous_link.className="page-link",pag_previous_link.setAttribute("href","#"),pag_previous_link.setAttribute("tabindex","-1"),pag_previous_link.setAttribute("aria-disabled","true"),pag_previous_link.textContent="<<",pag_previous.appendChild(pag_previous_link),this.actualOffset>=this.limitPerPage&&pag_previous.addEventListener("click",e=>{this.set_This("set_Pagination","actualOffset",this.actualOffset-this.limitPerPage),this.get_Recordings()},{once:!1}),pag_buttons.appendChild(pag_previous),this.nbPages=Math.trunc(this.nbReponses/this.limitPerPage);let max=this.nbPages>1?this.nbPages<10?this.nbPages+1:10:this.nbPages;for(let i=0;i<max;i++){let title="page "+(i+1),pag_button=document.createElement("li");pag_button.className="page-item"+(this.limitPerPage*i+1==this.actualOffset?" active":"");let pag_button_link=document.createElement("a");pag_button_link.className="page-link",pag_button_link.setAttribute("href","#"),pag_button_link.setAttribute("title",title),pag_button_link.textContent=this.limitPerPage*i,pag_button.appendChild(pag_button_link),pag_button.addEventListener("click",e=>{this.set_This("set_Pagination","actualOffset",this.limitPerPage*i),document.querySelector("#contents").scrollTo(0,0),this.get_Recordings()},{once:!1}),pag_buttons.appendChild(pag_button)}let pag_next=document.createElement("li");pag_next.className="page-item"+(this.actualOffset<=this.nbReponses-this.limitPerPage?"":" disabled");let pag_next_link=document.createElement("a");pag_next_link.className="page-link",pag_next_link.setAttribute("href","#"),pag_next_link.textContent=">>",pag_next.appendChild(pag_next_link),this.actualOffset<this.nbReponses-this.limitPerPage&&pag_next.addEventListener("click",e=>{this.set_This("set_Pagination","actualOffset",this.limitPerPage+this.actualOffset),this.get_Recordings()},{once:!1}),pag_buttons.appendChild(pag_next);let pag_end=document.createElement("li");pag_end.className="page-item"+(this.actualOffset<=this.nbReponses-this.limitPerPage?"":" disabled");let pag_end_link=document.createElement("a");pag_end_link.className="page-link",pag_end_link.setAttribute("href","#"),pag_end_link.textContent="end",pag_end.appendChild(pag_end_link),this.actualOffset<this.nbReponses-this.limitPerPage&&pag_end.addEventListener("click",e=>{this.set_This("set_Pagination","actualOffset",Math.floor(this.nbReponses/this.limitPerPage)*this.limitPerPage),this.get_Recordings()},{once:!1}),pag_buttons.appendChild(pag_end),pagination.appendChild(pag_buttons),document.querySelector("#pagination")?(this.del_TagById("pagination"),document.querySelector("#cardtable").appendChild(pagination)):document.querySelector("#cardtable").appendChild(pagination)}}set_FullUrl(){let limit="&limit="+this.limitPerPage,fullsearch="";if("default"==this.maSelection)for(let i=0;i<this.fullColonnes.length;i++)fullsearch=fullsearch+(i>0?" OR ":"")+this.fullColonnes[i]+':"'+this.maRecherche+'"';else fullsearch=this.maSelection+':"'+this.maRecherche+'"';this.set_This("set_FullUrl","urlDemandee",this.urlDatas.url+this.typeActuel+this.urlDatas.inc+fullsearch+limit+"&offset="+this.actualOffset)}set_NbSubmitPlus1(){this.nbSubmit=this.nbSubmit+1}set_images(resultats,mbid){if(resultats&&resultats.images)for(var i in this.debug&&console.log(resultats.images.length+" image"+(resultats.images.length>0?"s":"")),resultats.images)resultats.images[i].thumbnails.small&&this.modal_AddContent(!0,"div","arts-"+mbid,this.modal_AddImage(resultats.images[i].thumbnails.small,"modal-vignette",mbid,resultats.images[i].id),"image-"+mbid,"modalinfo-item")}set_CleanString(value){if(""!=value&&0!=value&&null!=value)return!(value.length<1)&&(!(value.length>50)&&encodeURIComponent(value))}set_CleanNewSearch(){this.set_This("set_CleanNewSearch","typeActuel",this.myCats[this.maSelection].type),this.set_This("set_CleanNewSearch","reqActuel",this.myCats[this.maSelection].SearchCategorie),this.set_This("set_CleanNewSearch","fullColonnes",this.myCats[this.maSelection].SearchTag),this.set_This("set_CleanNewSearch","reponseHtml",""),this.set_This("set_CleanNewSearch","reponseReq","")}set_OldSearch(datas){this.oldSearch.push({date:this.get_Date(),recherche:datas[0]?datas[0]:null,url:datas[1]?datas[1]:null,nbreponse:datas[2]?datas[2]:null,select:datas[3]?datas[3]:null})}set_InitialSearch(){this.set_This("set_InitialSearch","reponseHtml",""),this.set_This("set_InitialSearch","reponseReq",null),this.set_This("set_InitialSearch","nbSubmit",0),this.set_This("set_InitialSearch","maRecherche","")}get_This(Func,Nom){return this[Nom]}get_Recordings(){this.initialise,this.set_NbSubmitPlus1(),this.set_CleanNewSearch(),this.set_FullUrl(),this.set_This("get_Recordings","vinyl_searching",!0),this.vinylButon&&this.myOldVinyl(!0);let MonPost=new XMLHttpRequest;MonPost.open(this.urlDatas.methode,this.urlDemandee,!0),MonPost.setRequestHeader("Content-type","application/x-www-form-urlencoded"),MonPost.onreadystatechange=e=>{if(4==MonPost.readyState&&200==MonPost.status){let resultat=JSON.parse(MonPost.responseText);this.set_This("get_Recordings","reponseReq",resultat),this.set_This("get_Recordings","nbReponses",this.reponseReq.count),this.set_OldSearch([this.maRecherche,this.urlDemandee,this.nbReponses,this.maSelection]),this.vinylButon&&this.vinyl_searching&&this.myOldVinyl(!1),this.set_This("get_Recordings","vinyl_searching",!1),this.refresh_ResponsTable()}},this.debug&&console.clear(),this.debug&&console.log("get all Records at : "+this.urlDemandee),MonPost.send()}get_ReleaseByRecordingsId(oneRecord){let MonPost=new XMLHttpRequest,urlDemandee="https://musicbrainz.org/ws/2/recording/"+oneRecord.id+this.urlDatas.fmt+this.urlDatas.rel;MonPost.open(this.urlDatas.methode,urlDemandee,!0),MonPost.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.make_modal_alive(!0),MonPost.onreadystatechange=e=>{if(4==MonPost.readyState&&200==MonPost.status){let resultats=JSON.parse(MonPost.responseText);this.make_Modal(resultats)}},this.debug&&console.log("get all Releases by Record ID : "+urlDemandee),MonPost.send()}get_ArtsByReleaseId(mbid,title){let MonPost=new XMLHttpRequest,urlDemandee=this.urlDatas.arts+mbid+this.urlDatas.fmt,divresultats=document.querySelector("#release-"+mbid),reltitle=document.querySelector("#rel-title-"+mbid);MonPost.open(this.urlDatas.methode,urlDemandee,!0),MonPost.setRequestHeader("Content-type","application/x-www-form-urlencoded"),reltitle.textContent=" LOADING .",MonPost.onreadystatechange=e=>{if(this.debug&&console.log("coucou"),4==MonPost.readyState&&200==MonPost.status){let resultats=JSON.parse(MonPost.responseText);return this.debug&&console.log("all images from Release_Id : "+mbid),reltitle.textContent=title,this.debug&&console.log(resultats),this.set_images(resultats,mbid),resultats}4==MonPost.readyState&&404==MonPost.status&&(divresultats&&(divresultats.textContent="Sorry, no cover art found for release : "+mbid+" !"),this.debug&&console.log("No cover art found at url : "+urlDemandee))},this.debug&&console.log("get all arts from a Release_id at : "+urlDemandee),MonPost.send()}set_InitialSearch(){this.set_This("set_InitialSearch","reponseHtml",""),this.set_This("set_InitialSearch","reponseReq",null),this.set_This("set_InitialSearch","nbSubmit",0),this.set_This("set_InitialSearch","maRecherche","")}make_SelectMenu(){let catIndex=this.myCats,menuSelect=document.querySelector("#maselection");for(var datas in catIndex){let MenuOption=document.createElement("option");MenuOption.text=catIndex[datas].texteselect,MenuOption.value=catIndex[datas].name;let iconeclass=document.createElement("option");menuSelect.add(MenuOption)}menuSelect.selectedIndex=0}make_HtmlTable(){if(this.reponseReq){let tbody=document.createElement("tbody"),datas=this.reponseReq[this.reqActuel],ligneId=this.actualOffset;for(var oneRecord of datas){let trbody=document.createElement("tr"),item=document.createElement("td");item.className="idline",item.textContent=ligneId,trbody.appendChild(item),item=document.createElement("td"),item.textContent=oneRecord["artist-credit"]&&oneRecord["artist-credit"][0]?oneRecord["artist-credit"][0].name:"vide",item.setAttribute("title","artist-credit-id : "+oneRecord["artist-credit"][0].artist.id),trbody.appendChild(item);let itemtitle=document.createElement("td");itemtitle.textContent=oneRecord.title?oneRecord.title:"vide",item=document.createElement("td");let nbreleased=0,nblines=0,lesreleasesA="",lesreleasesB="";for(var released in oneRecord.releases){let lesreleases=oneRecord.releases[released];lesreleasesA=lesreleasesA+""+lesreleases.title+" ("+lesreleases.status+")\n",lesreleasesB=lesreleasesB+""+lesreleases.id+"\n",nbreleased+=lesreleases.count,nblines++}lesreleasesA=nblines+" release"+(nblines>1?"s":"")+" found \n"+lesreleasesA,lesreleasesB=nblines+" release"+(nblines>1?"s":"")+" found \n"+lesreleasesB,itemtitle.setAttribute("title",lesreleasesB),item.setAttribute("title",lesreleasesA),item.textContent=oneRecord.title,item.textContent=oneRecord.releases&&oneRecord.releases[0]?oneRecord.releases[0].title:this.nodata,trbody.appendChild(itemtitle),trbody.appendChild(item),item=document.createElement("td"),item.className="actions";let itembutton=document.createElement("button");if(itembutton.setAttribute("recording_id",oneRecord.id),itembutton.setAttribute("title","release Id: "+oneRecord.id),oneRecord.releases){let record=oneRecord;itembutton.addEventListener("click",e=>{this.get_ReleaseByRecordingsId(record)},{once:!1})}itembutton.className="btn btn-dark";let iconebutton=document.createElement("i");iconebutton.className=this.iconeVoirAlbum,itembutton.appendChild(iconebutton),item.appendChild(itembutton),trbody.appendChild(item),tbody.appendChild(trbody),ligneId++}return tbody}return"vide"}make_modal_alive(statut){let modalalbum=document.createElement("div");modalalbum.id="rel_modal",modalalbum.className="rel-modal-fs"+(statut?"-loading":"");let modaldialog=document.createElement("div");modaldialog.id="rel-modal-cadre",modaldialog.className="rel-modal-cadre";let modalcontent=document.createElement("div");if(modalcontent.id="rel-contenu-modal",modalcontent.className="rel-modal-contenu",statut){let recordloading=document.createElement("img");recordloading.className="recordloading",recordloading.src="assets/theme/loadingvinyl.svg",modalcontent.appendChild(recordloading)}modaldialog.appendChild(modalcontent),modalalbum.appendChild(modaldialog),document.body.appendChild(modalalbum)}make_Modal(lesreleases){this.debug&&console.log("lesreleases"),this.debug&&console.log(lesreleases),document.querySelector("#rel_modal")&&this.del_TagById("rel_modal"),this.make_modal_alive(null),this.modal_AddContent(!0,"div","rel-contenu-modal",null,"rel-modal-contenu-contenu","rel-modal-contenu-contenu"),this.modal_AddContent(!0,"div","rel-modal-contenu-contenu","Informations","rel-modal-contenu-contenu-info","rel-modal-contenu-contenu-info");let rec_title=!!lesreleases.title&&lesreleases.title;!rec_title||this.modal_AddContent(!0,"div","rel-modal-contenu-contenu-info","Title: "+rec_title+".","modaltitle","rel-modal-contenu-contenu-info-item");let rec_artistcredit=!!lesreleases["artist-credit"]&&lesreleases["artist-credit"];!rec_artistcredit||this.modal_AddContent(!0,"div","rel-modal-contenu-contenu-info","Artists: "+this.getall_tag(rec_artistcredit,"name")+".","modalartists","rel-modal-contenu-contenu-info-item");let rec_genres=!!lesreleases.genres&&lesreleases.genres;!rec_genres||this.modal_AddContent(!0,"div","rel-modal-contenu-contenu-info","Genres: "+this.getall_tag(rec_genres,"name")+".","modalgenres","rel-modal-contenu-contenu-info-item");let rec_length=!!lesreleases.length&&lesreleases.length;rec_length&&this.modal_AddContent(!0,"div","rel-modal-contenu-contenu-info","Length: "+this.make_Pyl_TimeFormat(rec_length),"modallength","rel-modal-contenu-contenu-info-item");let rec_rating=lesreleases.rating?lesreleases.rating.value:0,rec_votescount=lesreleases["votes-count"]?lesreleases["votes-count"].value:0;rec_rating&&this.modal_AddContent(!0,"div","rel-modal-contenu-contenu-info","Rating value: "+this.set_Stars(rec_rating),"modalrating","rel-modal-contenu-contenu-info-item"),this.modal_AddContent(!0,"div","rel-modal-contenu-contenu","","lesreleases","lesreleases");let relCount=0;for(let released in lesreleases.releases){let lereleased=lesreleases.releases[released],rel_divid="release-"+lereleased.id,rel_title=!!lereleased.title&&lereleased.title,titlerelease=document.createElement("h6");titlerelease.className="modal-rel-title",titlerelease.id="rel-title-"+lereleased.id,titlerelease.textContent=" Album : "+(rel_title||"vide"),this.modal_AddContent(!0,"div","lesreleases",titlerelease,rel_divid,"unerelease");let rel_country=!!lereleased.country&&lereleased.country,rel_date=!!lereleased.date&&lereleased.date,rel_disambiguation=!!lereleased.disambiguation&&lereleased.disambiguation,rel_trackcount=!!lereleased["track-count"]&&lereleased["track-count"];rel_country&&this.modal_AddContent(!0,"div",rel_divid,"country: "+rel_country,"modal-rel-country-"+relCount,"modalinfo-item"),!rel_date||this.modal_AddContent(!0,"div",rel_divid,"date: "+rel_date,"modal-rel-date-"+relCount,"modalinfo-item"),!rel_disambiguation||this.modal_AddContent(!0,"div",rel_divid,"disambiguation: "+rel_disambiguation,"modal-rel-disambiguation-"+relCount,"modalinfo-item"),!rel_trackcount||this.modal_AddContent(!0,"div",rel_divid,"track-count: "+rel_trackcount,"modal-rel-trackcount-"+relCount,"modalinfo-item");let art_divid="arts-"+lereleased.id;this.modal_AddContent(!0,"div",rel_divid,"",art_divid,"arts"),this.get_ArtsByReleaseId(lereleased.id,rel_title),relCount++}this.modal_AddHeader("div","rel-contenu-modal",lesreleases["artist-credit"]&&lesreleases["artist-credit"][0]?lesreleases["artist-credit"][0].name+" - "+lesreleases.title:"vide"),this.modal_AddFooter("div","rel-contenu-modal")}modal_AddHeader(tag,destId,leString){let cible=document.querySelector("#"+destId),modalheader=document.createElement(tag);modalheader.className="rel-modal-contenu-header";let modaltitle=document.createElement("h6");modaltitle.id="ZLabel",modaltitle.className="rel-modal-contenu-header-label",modaltitle.textContent=leString;let modalbutton=document.createElement("button");modalbutton.id="ZClose",modalbutton.className="btn-rel btn-rel-close",modalbutton.addEventListener("click",e=>{let aEffacer=document.querySelector("#rel_modal");aEffacer.parentNode.removeChild(aEffacer)},{once:!0}),modalbutton.textContent="Close",modalheader.appendChild(modaltitle),modalheader.appendChild(modalbutton),cible.prepend(modalheader)}modal_AddFooter(tag,destId){if(this.modalFooter){let Cible=document.querySelector("#"+destId);var modalfooter=document.createElement(tag);modalfooter.className="rel-modal-contenu-footer";let modalyoutube=document.createElement("a");modalyoutube.className="btn-rel btn-rel-youtube",modalyoutube.setAttribute("href","https://youtube.com"),modalyoutube.setAttribute("target","_youtube"),modalyoutube.setAttribute("type","button"),modalyoutube.textContent=" Youtube";let modalyoutubeico=document.createElement("i");modalyoutubeico.className="fab fa-youtube",modalyoutube.prepend(modalyoutubeico);let modalfermer=document.createElement("a");modalfermer.className="btn-rel btn-rel-close",modalfermer.textContent=" Fermer";let modalfermerico=document.createElement("i");modalfermerico.className="fas fa-door-closed",modalfermer.prepend(modalfermerico),modalfermer.addEventListener("click",e=>{let aEffacer=document.querySelector("#rel_modal");aEffacer.parentNode.removeChild(aEffacer)},{once:!0}),modalfooter.appendChild(modalyoutube),modalfooter.appendChild(modalfermer),Cible.appendChild(modalfooter)}}modal_AddImage(lurl,laClass,mbid,imgid){let ajout=document.createElement("img");ajout.id="vig-"+imgid,ajout.className=laClass+" loading",ajout.src="assets/theme/loadingvinyl.svg";var img=new Image;return img.onload=function(){let newimage=document.querySelector("#vig-"+imgid);newimage&&(document.querySelector("#vig-"+imgid).src=lurl),newimage&&document.querySelector("#vig-"+imgid).classList.remove("loading")},img.src=lurl,ajout}modal_AddContent(pos=!1,tag,destId,leString,lId,laClass,lIcone=null){let Cible=document.querySelector("#"+destId);if(Cible){let ajout=document.createElement(tag);if(ajout.id=lId,ajout.className=laClass,"object"==typeof leString&&null!==leString?ajout.appendChild(leString):ajout.textContent=leString,lIcone){let icone=document.createElement("i");icone.className="fas fa-record-vinyl",ajout.prepend(icone)}pos?Cible.appendChild(ajout):Cible.prepend(ajout)}}modal_TempoVignette(mbid){this.modal_AddContent(!0,"div","arts-"+mbid,this.modal_AddImage("toto","modal-vignette-tempo",mbid),"tempo-"+mbid,"modalinfo-item")}fresh_HtmlPage(){let containertableau=document.querySelector("#containertableau"),tagStatut=document.createElement("div");tagStatut.id="status",tagStatut.className="mb-4",tagStatut.textContent="Some stuff here in the future !",containertableau.textContent="",containertableau.appendChild(tagStatut);let card=document.createElement("div");card.id="cardtable",card.className="lapage shadow";let cardheader=document.createElement("div");cardheader.className="page-entete";let cardresponse=document.createElement("div");cardresponse.id="lareponse",cardresponse.className="font-weight-bold text-primary";let cardbody=document.createElement("div");cardbody.className="page-corps";let tableresponsive=document.createElement("div");tableresponsive.className="table-responsive";let table=document.createElement("table");table.id="datatable",table.className="table table-bordered table-striped table-hover table-sm";let tablecaption=document.createElement("caption");containertableau.textContent="",table.appendChild(tablecaption),tableresponsive.appendChild(table),cardheader.appendChild(cardresponse),card.appendChild(cardheader),cardbody.appendChild(tableresponsive),card.appendChild(cardbody),containertableau.appendChild(card),this.refresh_PageHeaderContent(),this.make_SelectMenu()}refresh_PageHeaderContent(string=null){this.del_TagById("pageheadercontent");let bloccontents=document.createElement("div");bloccontents.id="pageheadercontent",bloccontents.textContent="Make your own search on : ";let content=document.createElement("a");content.setAttribute("href","https://musicbrainz.org/"),content.setAttribute("title","Make your own search on MusicbrainZ"),content.setAttribute("target","_musicbrainz"),content.textContent="MusicBrainz - The Open Music Encyclopedia",bloccontents.appendChild(content);let br=document.createElement("br");if(bloccontents.appendChild(br),string){let txt=document.createTextNode(string);bloccontents.appendChild(txt)}document.querySelector("#lareponse").appendChild(bloccontents)}refresh_ResponsTable(){if(0==this.nbReponses)document.querySelector("#lareponse").textContent="",document.querySelector("#datatable").textContent="Nothing found, sorry !",this.refresh_PageHeaderContent(),this.del_TagById("pagination");else{this.refresh_PageHeaderContent(),document.querySelector("#lareponse").textContent=this.nbReponses+" Result"+(this.nbReponses>1?"s.":"."),document.querySelector("#datatable").textContent="";let thead=document.createElement("thead");thead.id="musika-header";let trhead=document.createElement("tr");for(var i=0;i<this.myCats[this.maSelection].intitules.length;i++){let item=document.createElement("th");item.textContent=this.myCats[this.maSelection].intitules[i],trhead.appendChild(item)}thead.appendChild(trhead),document.querySelector("#datatable").appendChild(thead),document.querySelector("#datatable").appendChild(this.make_HtmlTable());let tfoot=document.createElement("tfoot");tfoot.id="musika-footer";let trfoot=document.createElement("tr");for(var i=0;i<this.myCats[this.maSelection].intitules.length;i++){let item=document.createElement("th");item.textContent=this.myCats[this.maSelection].intitules[i],trfoot.appendChild(item)}tfoot.appendChild(trfoot),document.querySelector("#datatable").appendChild(tfoot),this.set_Pagination()}}myOldVinylButon(){let vinylactivity=document.querySelector("#vinyl-bouton-content"),spinnervinyl=document.querySelector("#spinnervinyl");if(this.vinylButon){this.set_This("vinyl-bouton","vinylButon",!1),this.myOldVinyl(!1),vinylactivity.textContent="SpinIsOff ";let vinylactivity_icone=document.createElement("i");vinylactivity_icone.className="fas fa-toggle-on",vinylactivity.appendChild(vinylactivity_icone),spinnervinyl.classList.add("disabled"),event.target.title="Switch Spinner OFF",spinnervinyl.classList.remove("spinning")}else{this.set_This("vinyl-bouton","vinylButon",!0),spinnervinyl.classList.remove("disabled"),event.target.title="Switch Spinner ON",vinylactivity.textContent="SpinIsON ";let vinylactivity_icone=document.createElement("i");vinylactivity_icone.className="fas fa-toggle-off",vinylactivity.appendChild(vinylactivity_icone),spinnervinyl.classList.add("spinning")}}myOldVinylOpacity(centage){let vinyl=document.querySelector("#spinnervinyl");vinyl&&(vinyl.style.opacity=centage)}myOldVinyl(on){let vinyl=document.querySelector("#spinnervinyl");document.querySelector("#spinnervinyl")&&(on?vinyl.classList.add("searching"):vinyl.classList.remove("searching"))}getall_artistcredit(index,le_name){if(index.length>0){let retour=[];for(let i=0;i<index.length;i++)retour[i]=index[i][le_name];return retour.length>0?retour.join(", "):"vide"}return"vide"}getall_tag(index,le_name){if(index.length>0){let retour=[];for(let i=0;i<index.length;i++)retour[i]=index[i][le_name];return retour.length>0?retour.join(", "):"vide"}return"vide"}get_Date(){let today=new Date;return today.getDate()+"-"+today.getMonth()+"-"+today.getFullYear()+" "+today.getHours()+":"+today.getMinutes()+":"+today.getSeconds()+":"}make_awesomeico(string){let awesomeico=document.createElement("i");return awesomeico.className=string,awesomeico}make_Pyl_TimeFormat(number){let minutes=0,seconds=0;return number?(number/=1e3,seconds=Math.floor(number%60)>0?`${Math.floor(number%60)}`:"",minutes=Math.floor(number/60)>0?`${Math.floor(number/60)}:`:"",minutes+seconds):null}make_linktag(url,text,target){let link=document.createElement("a");return link.className="",link.setAttribute("href",url),link.setAttribute("target","_out_"+target),link.textContent=text,link}set_Stars(score){let stars="";for(let i=0;i<5;i++)stars+=score>i?"★":"☆";return stars}}let Zik=new Muzica("musika");Zik.listener(),Zik.fresh_HtmlPage();